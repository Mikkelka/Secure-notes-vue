@import "tailwindcss";

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(156, 163, 175, 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(156, 163, 175, 0.5);
}

/* Firefox scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(156, 163, 175, 0.3) rgba(0, 0, 0, 0.1);
}

/* Performance optimizations */
.will-change-transform {
  will-change: transform;
}

/* Prevent layout shift */
.scrollbar-gutter-stable {
  scrollbar-gutter: stable;
}

/* Smooth scrolling for pagination */
.smooth-scroll {
  scroll-behavior: smooth;
}

/* Optimize text rendering */
html, body {
  height: 100%;
  background-color: #111827; /* gray-900 */
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Prevent pull-to-refresh on mobile */
  overscroll-behavior-y: contain;
}

/* PWA touch optimizations */
@media (max-width: 768px) {
  html {
    /* Enhanced touch scrolling */
    -webkit-overflow-scrolling: touch;
    /* Prevent zoom on focus for better UX */
    touch-action: manipulation;
  }
  
  body {
    /* Remove tap highlights */
    -webkit-tap-highlight-color: transparent;
  }
}

/* TipTap editor styles */
.editor-input {
  min-height: inherit;
  outline: none;
  background: transparent;
}

.editor-input[contenteditable="true"] {
  min-height: inherit;
}

.editor-paragraph {
  margin: 0;
  position: relative;
}

/* TipTap content styling - applies to both editor and viewer */
.ProseMirror {
  outline: none;
  padding: 0;
  margin: 0;
  color: #d1d5db; /* gray-300 - default text color */
}

.ProseMirror p {
  margin: 0.5rem 0;
  line-height: 1.5;
  color: #d1d5db; /* gray-300 */
}

.ProseMirror h1 {
  font-size: 1.5rem;
  font-weight: 700;
  margin: 1rem 0 0.5rem 0;
  line-height: 1.2;
  color: white;
}

.ProseMirror h2 {
  font-size: 1.25rem;
  font-weight: 600;
  margin: 0.75rem 0 0.5rem 0;
  line-height: 1.3;
  color: white;
}

.ProseMirror strong {
  font-weight: bold;
  color: #d1d5db !important; /* gray-300 */
}

.ProseMirror em {
  font-style: italic;
  color: #d1d5db !important; /* gray-300 */
}

.ProseMirror u {
  text-decoration: underline;
  color: #d1d5db !important; /* gray-300 */
}

.ProseMirror s {
  text-decoration: line-through;
  color: #d1d5db !important; /* gray-300 */
}

.ProseMirror ul,
.ProseMirror ol {
  margin: 0.5rem 0;
  padding-left: 1.5rem;
}

.ProseMirror ul {
  list-style-type: disc;
}

.ProseMirror ol {
  list-style-type: decimal;
}

.ProseMirror li {
  margin: 0.25rem 0;
  line-height: 1.5;
  color: #d1d5db; /* gray-300 */
}

.ProseMirror a {
  color: #60a5fa;
  text-decoration: underline;
}

.ProseMirror a:hover {
  color: #93c5fd;
}

/* Ensure all text in ProseMirror is visible */
.ProseMirror * {
  color: #d1d5db !important; /* Force all text to be visible */
}

.ProseMirror,
.ProseMirror p,
.ProseMirror li,
.ProseMirror span,
.ProseMirror div {
  color: #d1d5db !important; /* gray-300 - force text visibility */
}

/* Override any Tailwind prose styles */
.prose .ProseMirror,
.prose-invert .ProseMirror {
  color: #d1d5db !important;
}

/* Force EditorContent visibility */
.editor-content .ProseMirror,
.editor-content .ProseMirror * {
  color: #d1d5db !important;
}

/* Text node visibility */
.ProseMirror [data-pm-slice] {
  color: #d1d5db !important;
}

/* Ultimate text visibility enforcement */
div[contenteditable="true"] .ProseMirror,
div[contenteditable="false"] .ProseMirror {
  color: #d1d5db !important;
}

/* TipTap specific overrides */
.tiptap {
  color: #d1d5db !important;
}

.tiptap * {
  color: #d1d5db !important;
}

/* Vue component specific */
.editor-content .ProseMirror {
  background-color: transparent !important;
  color: #d1d5db !important;
}

/* Text rendering debug */
.ProseMirror::before {
  content: "" !important;
}

/* Reset ProseMirror styling */
.ProseMirror {
  min-height: 20px !important;
}

/* Direct HTML content styling */
.prose-content {
  color: #d1d5db !important;
}

.prose-content p {
  margin: 0.5rem 0;
  line-height: 1.5;
  color: #d1d5db !important;
}

.prose-content h1 {
  font-size: 1.5rem;
  font-weight: 700;
  margin: 1rem 0 0.5rem 0;
  line-height: 1.2;
  color: #ffffff !important;
}

.prose-content h2 {
  font-size: 1.25rem;
  font-weight: 600;
  margin: 0.75rem 0 0.5rem 0;
  line-height: 1.3;
  color: #ffffff !important;
}

.prose-content h3 {
  font-size: 1.125rem;
  font-weight: 600;
  margin: 0.5rem 0 0.5rem 0;
  line-height: 1.4;
  color: #ffffff !important;
}

.prose-content strong {
  font-weight: bold;
  color: #d1d5db !important;
}

.prose-content em {
  font-style: italic;
  color: #d1d5db !important;
}

.prose-content u {
  text-decoration: underline;
  color: #d1d5db !important;
}

.prose-content s {
  text-decoration: line-through;
  color: #d1d5db !important;
}

.prose-content ul,
.prose-content ol {
  margin: 0.5rem 0;
  padding-left: 1.5rem;
}

.prose-content ul {
  list-style-type: disc;
}

.prose-content ol {
  list-style-type: decimal;
}

.prose-content li {
  margin: 0.25rem 0;
  line-height: 1.5;
  color: #d1d5db !important;
}

/* Legacy classes for backward compatibility */
.editor-text-bold {
  font-weight: bold;
}

.editor-text-italic {
  font-style: italic;
}

.editor-text-underline {
  text-decoration: underline;
}

.editor-heading-h1 {
  font-size: 1.5rem;
  font-weight: 700;
  margin: 0.5rem 0;
  line-height: 1.2;
}

.editor-heading-h2 {
  font-size: 1.25rem;
  font-weight: 600;
  margin: 0.5rem 0;
  line-height: 1.3;
}

.editor-list-ol,
.editor-list-ul {
  margin: 0.5rem 0;
  padding-left: 1.5rem;
}

.editor-list-ol {
  list-style: decimal;
}

.editor-list-ul {
  list-style: disc;
}

.editor-listitem {
  margin: 0.25rem 0;
}

.editor-nested-listitem {
  list-style: circle;
}

.editor-link {
  color: #60a5fa;
  text-decoration: underline;
}

.editor-link:hover {
  color: #93c5fd;
}

/* Custom dropdown arrow */
.dropdown-arrow {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  background-size: 1rem;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Component Utility Classes with @apply */

/* Button Patterns */
.btn-base {
  @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all;
}

.btn-disabled {
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
}

.btn-focus {
  @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
}

.btn-google {
  @apply w-full inline-flex items-center justify-center gap-3 px-4 py-3 rounded-md font-medium transition-all hover:shadow-lg hover:bg-gray-50 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed;
}

/* Input Patterns */
.input-base {
  @apply w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-500 transition-all;
}

/* Code Block Styling */
pre {
  @apply bg-gray-800 border border-gray-600 rounded-lg p-4 overflow-x-auto text-sm my-4;
  color: #e5e7eb !important;
  font-family: 'JetBrains Mono', 'Fira Code', 'Monaco', 'Consolas', monospace;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Inline code styling - maximum specificity */
div.text-gray-300.prose-content code,
div.prose-content code {
  background-color: rgba(55, 65, 81, 0.9) !important;
  border: 1px solid #4b5563 !important;
  border-radius: 4px !important;
  padding: 2px 8px !important;
  font-size: 0.875rem !important;
  color: #fbbf24 !important;
  font-family: 'JetBrains Mono', 'Fira Code', 'Monaco', 'Consolas', monospace !important;
  margin: 0 6px !important;
  display: inline-block !important;
  vertical-align: baseline !important;
  font-weight: 500 !important;
}

/* Inline code within pre blocks */
div.text-gray-300.prose-content pre code,
div.prose-content pre code {
  background-color: transparent !important;
  border: none !important;
  padding: 0 !important;
  color: inherit !important;
  margin: 0 !important;
  display: inline !important;
  font-weight: normal !important;
}

/* Horizontal rule styling */
hr {
  @apply border-gray-600 my-6;
  border-width: 1px 0 0 0;
}

/* Prose content styling */
.prose-content {
  color: #d1d5db;
}

.prose-content p {
  color: #d1d5db;
}

.input-small {
  @apply w-full px-3 py-2 bg-gray-700/50 border border-gray-600/50 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-500;
}

.input-variant-green {
  @apply w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500;
}

.input-variant-blue {
  @apply w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500;
}

.input-variant-purple {
  @apply w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500;
}

/* Layout Patterns */
.centered {
  @apply flex items-center justify-center;
}

.fullscreen-bg {
  @apply h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black flex items-center justify-center p-4 overflow-hidden;
}

.icon-container {
  @apply inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r from-gray-600 to-gray-500 rounded-xl;
}

.icon-container-small {
  @apply inline-flex items-center justify-center w-8 h-8 bg-gradient-to-r from-gray-600 to-gray-500 rounded-lg;
}

/* Toggle Switch Patterns */
.toggle-base {
  @apply relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent;
}

.toggle-focus {
  @apply transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2;
}

.toggle-disabled {
  @apply disabled:cursor-not-allowed disabled:opacity-50;
}

.toggle-thumb {
  @apply pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0;
}

.toggle-thumb-transition {
  @apply transition duration-200 ease-in-out;
}

/* PIN Input Patterns */
.pin-digit {
  @apply w-12 h-12 text-center text-xl bg-gray-700/50 border border-gray-600/50 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;
}

/* Button Variants */
.btn-small-base {
  @apply flex-1 px-3 py-2 rounded transition-colors text-sm;
}

.btn-gray {
  @apply bg-gray-600 text-white hover:bg-gray-500;
}

.btn-red {
  @apply bg-red-600 text-white hover:bg-red-500;
}

.btn-green {
  @apply bg-green-600 text-white hover:bg-green-500;
}

.btn-yellow-subtle {
  @apply bg-yellow-600/20 border border-yellow-600/30 text-yellow-300 hover:bg-yellow-600/30;
}

.btn-warning {
  @apply w-full px-3 py-2 rounded transition-colors text-xs;
}

/* Header Button Patterns */
.header-btn-base {
  @apply flex items-center gap-2 px-3 py-1.5 rounded transition-colors text-sm;
}

.header-btn-blue {
  @apply bg-blue-500/10 border border-blue-500/20 text-blue-300 hover:bg-blue-500/20;
}

.header-btn-purple {
  @apply bg-purple-500/10 border border-purple-500/20 text-purple-300 hover:bg-purple-500/20;
}

.header-btn-gray {
  @apply bg-gray-500/10 border border-gray-500/20 text-gray-300 hover:bg-gray-500/20;
}

.header-btn-red {
  @apply bg-red-500/10 border border-red-500/20 text-red-300 hover:bg-red-500/20;
}

.header-btn-orange {
  @apply bg-orange-500/10 border border-orange-500/20 text-orange-300 hover:bg-orange-500/20;
}

/* Dropdown Button Patterns */
.dropdown-btn-base {
  @apply w-full text-left hover:bg-gray-700 transition-colors flex items-center gap-2 text-sm touch-manipulation;
}

.dropdown-btn-mobile {
  @apply w-full px-4 py-3 text-left hover:bg-gray-700 transition-colors flex items-center gap-3;
}

/* Dialog & Modal Patterns */
.modal-backdrop {
  @apply fixed inset-0 z-[80] flex items-start justify-center p-2 bg-black/50 backdrop-blur-sm lg:items-center overflow-y-auto;
}

.modal-container {
  @apply bg-gray-800/90 backdrop-blur border border-gray-700/50 rounded-2xl shadow-2xl;
}

.modal-close-btn {
  @apply text-gray-400 hover:text-white transition-colors p-1 rounded-lg hover:bg-gray-700/50;
}

/* Note Item Patterns */
.note-item {
  @apply bg-gray-800/60 border rounded-lg p-3 transition-all cursor-pointer;
}

.note-item-selected {
  @apply border-blue-500/50 bg-blue-500/10;
}

.note-item-default {
  @apply border-gray-700/50 hover:bg-gray-800/80;
}

.folder-label {
  @apply px-2 py-1 rounded-full text-xs font-medium border flex items-center gap-1 cursor-pointer hover:opacity-80 transition-opacity;
}

.action-btn-icon {
  @apply p-2 hover:bg-gray-700 rounded transition-colors;
}

.delete-btn {
  @apply p-2 hover:bg-red-500/20 rounded transition-colors text-red-400 hover:text-red-300;
}

/* Mobile Drawer Patterns */
.mobile-drawer-backdrop {
  @apply fixed inset-0 z-40 md:hidden;
}

.mobile-drawer-container {
  @apply absolute bottom-0 left-0 right-0 bg-gray-800/95 backdrop-blur rounded-t-2xl border-t border-gray-700/50;
}

.mobile-bottom-menu {
  @apply fixed bottom-0 left-0 right-0 h-14 bg-gray-800/90 backdrop-blur border-t border-gray-700/50 z-50 md:hidden;
}

/* Input Variant Extensions */
.input-search {
  @apply w-full pl-9 pr-3 py-2 bg-gray-700/50 border border-gray-600/50 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-500 transition-all text-sm;
}

.input-search-mobile {
  @apply flex-1 bg-gray-700/50 border border-gray-600/50 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-500;
}

/* Select & Dropdown Variants */
.select-base {
  @apply w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 appearance-none cursor-pointer;
}

/* Loading Patterns */
.loading-container {
  @apply bg-gray-800/60 border border-gray-700/50 rounded-lg p-6 text-center;
}

.loading-spinner {
  @apply animate-spin w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-3;
}

/* Main App Layout */
.main-app-bg {
  @apply min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black;
}

/* PIN Input Variant */
.pin-input {
  @apply w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500;
}

/* Note Action Button Patterns */
.note-action-btn-base {
  @apply inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800;
}

.note-action-btn-mobile {
  @apply p-2 rounded-full transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800;
}

.note-action-btn-desktop {
  @apply flex-1 px-4 py-2 rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800;
}

/* Note Action Button Variants */
.note-action-edit {
  @apply bg-blue-500/10 border border-blue-500/20 text-blue-300 hover:bg-blue-500/20 focus:ring-blue-500;
}

.note-action-delete {
  @apply bg-red-500/10 border border-red-500/20 text-red-300 hover:bg-red-500/20 focus:ring-red-500;
}

.note-action-favorite {
  @apply bg-yellow-500/10 border border-yellow-500/20 text-yellow-300 hover:bg-yellow-500/20 focus:ring-yellow-500;
}

.note-action-favorite-active {
  @apply bg-yellow-500/20 border border-yellow-500/30 text-yellow-300 hover:bg-yellow-500/30 focus:ring-yellow-500;
}

.note-action-close {
  @apply bg-gray-500/10 border border-gray-500/20 text-gray-300 hover:bg-gray-500/20 focus:ring-gray-500;
}

/* Note Action Button Mobile Variants */
.note-action-edit-mobile {
  @apply text-blue-400 hover:bg-blue-500/20 focus:ring-blue-500;
}

.note-action-delete-mobile {
  @apply text-red-400 hover:bg-red-500/20 focus:ring-red-500;
}

.note-action-favorite-mobile {
  @apply text-gray-400 hover:bg-gray-700 focus:ring-gray-500;
}

.note-action-favorite-mobile-active {
  @apply text-yellow-400 hover:bg-yellow-400/20 focus:ring-yellow-500;
}

.note-action-close-mobile {
  @apply text-gray-400 hover:bg-gray-700 hover:text-white focus:ring-gray-500;
}

/* Note Action Container Patterns */
.note-actions-container {
  @apply p-4 border-t border-gray-700/50;
}

.note-actions-mobile {
  @apply flex justify-center gap-4;
}

.note-actions-desktop {
  @apply flex gap-3;
}

/* Note Editing Button Patterns - Following header-btn structure */
.note-editing-btn-base {
  @apply inline-flex items-center justify-center gap-2 px-3 py-1.5 rounded transition-colors text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed;
}

.note-editing-btn-mobile {
  @apply flex-1 px-3 py-1.5 rounded transition-colors text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed;
}

.note-editing-btn-desktop {
  @apply px-3 py-1.5 rounded transition-colors text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed;
}

/* Note Editing Button Variants - Following header-btn pattern */
.note-editing-save {
  @apply bg-green-500/10 border border-green-500/20 text-green-300 hover:bg-green-500/20 focus:ring-green-500 disabled:opacity-50;
}

.note-editing-cancel {
  @apply bg-gray-500/10 border border-gray-500/20 text-gray-300 hover:bg-gray-500/20 focus:ring-gray-500;
}

.note-editing-undo {
  @apply bg-orange-500/10 border border-orange-500/20 text-orange-300 hover:bg-orange-500/20 focus:ring-orange-500;
}

.note-editing-ai {
  @apply bg-purple-500/10 border border-purple-500/20 text-purple-300 hover:bg-purple-500/20 focus:ring-purple-500 disabled:opacity-50;
}

.note-editing-ai-processing {
  @apply bg-blue-500/10 border border-blue-500/20 text-blue-300 hover:bg-blue-500/20 focus:ring-blue-500 disabled:opacity-50;
}

.note-editing-ai-streaming {
  @apply bg-green-500/10 border border-green-500/20 text-green-300 hover:bg-green-500/20 focus:ring-green-500 disabled:opacity-50;
}

.note-editing-ai-completed {
  @apply bg-emerald-500/10 border border-emerald-500/20 text-emerald-300 hover:bg-emerald-500/20 focus:ring-emerald-500 disabled:opacity-50;
}

.note-editing-ai-toggle {
  @apply bg-purple-500/10 border border-purple-500/20 text-purple-300 hover:bg-purple-500/20 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed;
}

/* Note Editing Container Patterns */
.note-editing-container {
  @apply border-t border-gray-700/50 p-4;
}

.note-editing-container-desktop {
  @apply border-t border-gray-700/50 p-4;
}

.note-editing-actions-row {
  @apply flex items-center gap-3;
}

.note-editing-actions-row-mobile {
  @apply flex items-center gap-3;
}
